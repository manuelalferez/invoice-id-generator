<!DOCTYPE html>
<html lang="en" data-theme="dim">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice Id Generator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@4.12.23/dist/full.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="icon"
      href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'><path fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M9.478 3H7.25A2.25 2.25 0 0 0 5 5.25v13.5A2.25 2.25 0 0 0 7.25 21h9a2.25 2.25 0 0 0 2.25-2.25V12M9.478 3c1.243 0 2.272 1.007 2.272 2.25V7.5A2.25 2.25 0 0 0 14 9.75h2.25A2.25 2.25 0 0 1 18.5 12M9.478 3c3.69 0 9.022 5.36 9.022 9M9 16.5h6m-6-3h4'/></svg>"
      type="image/svg+xml"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-base-200">
    <nav class="bg-base-300 shadow" data-theme="dim">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="relative flex items-center justify-center h-16">
          <div class="flex-shrink-0 flex items-center gap-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              class="w-6 h-6 text-primary"
            >
              <path
                fill="none"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M9.478 3H7.25A2.25 2.25 0 0 0 5 5.25v13.5A2.25 2.25 0 0 0 7.25 21h9a2.25 2.25 0 0 0 2.25-2.25V12M9.478 3c1.243 0 2.272 1.007 2.272 2.25V7.5A2.25 2.25 0 0 0 14 9.75h2.25A2.25 2.25 0 0 1 18.5 12M9.478 3c3.69 0 9.022 5.36 9.022 9M9 16.5h6m-6-3h4"
              />
            </svg>
            <h1 class="text-xl font-bold text-primary inline">
              Invoice Id Generator
            </h1>
          </div>
        </div>
      </div>
    </nav>

    <div class="flex items-center justify-center min-h-screen">
      <div
        class="flex flex-col items-center justify-center max-w-lg mx-auto bg-base-100 p-4 rounded-lg shadow-lg"
      >
        <h1 class="text-3xl font-bold mb-4 text-center text-primary">
          Invoice Generator
        </h1>
        <div class="form-control w-full mb-4">
          <label class="label">
            <span class="label-text text-neutral-content">Client Name</span>
          </label>
          <input
            type="text"
            id="client-name"
            placeholder="Enter client name"
            class="input input-bordered w-full"
          />
        </div>
        <button id="generate-btn" class="btn btn-primary w-full mb-4">
          Generate Invoice ID
        </button>
        <div
          id="invoice-id"
          class="mt-4 text-lg text-center text-neutral-content flex flex-col items-center"
        >
          Generated Invoice ID:
          <div class="p-4 w-full flex items-center justify-between gap-4">
            <h2 class="text-lg font-semibold text-neutral"></h2>
            <span
              id="generated-id"
              class="font-semibold text-lg text-neutral-content"
            ></span>
            <button
              id="copy-btn"
              class="mt-2 btn btn-secondary flex items-center gap-2 w-36"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                class="w-6 h-6"
              >
                <path
                  fill="none"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M20.829 12.861c.171-.413.171-.938.171-1.986s0-1.573-.171-1.986a2.25 2.25 0 0 0-1.218-1.218c-.413-.171-.938-.171-1.986-.171H11.1c-1.26 0-1.89 0-2.371.245a2.25 2.25 0 0 0-.984.984C7.5 9.209 7.5 9.839 7.5 11.1v6.525c0 1.048 0 1.573.171 1.986c.229.551.667.99 1.218 1.218c.413.171.938.171 1.986.171s1.573 0 1.986-.171m7.968-7.968a2.25 2.25 0 0 1-1.218 1.218c-.413.171-.938.171-1.986.171s-1.573 0-1.986.171a2.25 2.25 0 0 0-1.218 1.218c-.171.413-.171.938-.171 1.986s0 1.573-.171 1.986a2.25 2.25 0 0 1-1.218 1.218m7.968-7.968a11.68 11.68 0 0 1-7.75 7.9l-.218.068M16.5 7.5v-.9c0-1.26 0-1.89-.245-2.371a2.25 2.25 0 0 0-.983-.984C14.79 3 14.16 3 12.9 3H6.6c-1.26 0-1.89 0-2.371.245a2.25 2.25 0 0 0-.984.984C3 4.709 3 5.339 3 6.6v6.3c0 1.26 0 1.89.245 2.371c.216.424.56.768.984.984c.48.245 1.111.245 2.372.245H7.5"
                />
              </svg>
              Copy
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer class="bg-base-300 shadow mt-4">
      <div class="max-w-7xl mx-auto py-4 text-center">
        <p class="text-neutral-content">
          Created by
          <a
            href="https://manuelalferez.com"
            class="text-primary"
            target="_blank"
            >Manuel Alf√©rez</a
          >
        </p>
      </div>
    </footer>

    <script>
      const generateUniqueId = () => {
        const timestamp = Date.now().toString(36);
        const uniqueString = Math.random().toString(36).substring(2, 8);
        const clientName =
          document.getElementById("client-name").value.trim().toUpperCase() ||
          "INV";
        return `${clientName}-${timestamp}-${uniqueString}`.toUpperCase();
      };

      const handleGenerateId = () => {
        const clientName = document.getElementById("client-name").value.trim();
        localStorage.setItem("clientName", clientName);
        const newId = generateUniqueId();
        document.getElementById("generated-id").innerText = newId;
      };

      const handleCopyId = () => {
        const invoiceIdText = document.getElementById("generated-id").innerText;
        const copyBtn = document.getElementById("copy-btn");
        const originalContent = copyBtn.innerHTML;

        navigator.clipboard.writeText(invoiceIdText).then(() => {
          copyBtn.innerHTML =
            '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" class="inline-block"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 13.626l1.606 1.722c.886.95 1.329 1.424 1.825 1.574c.436.131.9.096 1.315-.1c.473-.224.852-.761 1.612-1.836L18 7"/></svg> Copied!';
          setTimeout(() => {
            copyBtn.innerHTML = originalContent;
          }, 2000);
        });
      };

      // Load saved client name and show unique ID on page load
      window.onload = () => {
        const savedClientName = localStorage.getItem("clientName");
        if (savedClientName) {
          document.getElementById("client-name").value = savedClientName;
        }
        handleGenerateId();
      };

      document
        .getElementById("generate-btn")
        .addEventListener("click", handleGenerateId);
      document
        .getElementById("copy-btn")
        .addEventListener("click", handleCopyId);
    </script>
  </body>
</html>
